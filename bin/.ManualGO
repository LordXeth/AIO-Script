export PATH=/bin
export TMP=/tmp
export TEMP=/tmp
export tmp=/tmp

rm -rf /tmp/* > /dev/null 2>&1

# Exclamation mark (!) workaround
set +H &>/dev/null; set +o histexpand &>/dev/null;

JavaPATH="$(cat /bin/.JavaPATH 2>/dev/null | sed -ne 's#\"##g;s#\\$##;1p' 2>/dev/null)"
if [ -n "$JavaPATH" ]; then
	JavaPATH="$(cygpath -ua "$JavaPATH" 2>/dev/null)"
	if [ -d "$JavaPATH" ]; then
		"$JavaPATH"/java -version > /dev/null 2>&1;
		if [ ${?} -ne 0 ]; then
			echo -e "\n[E] Java not properly configured\n";
		else
			if [ 170 -gt "$("$JavaPATH"/java -version 2>&1 | sed -ne 's#^java.*\([0-9]\.[0-9]\.[0-9]\).*#\1#Ip' | sed -ne 's#\.##gp' | sed -ne 1p)" ]; then
				echo -e "\n[E] Java v1.7 or higher required\n";
			else
				export PATH="$PATH:$JavaPATH"
			fi
		fi
	fi
fi
unset JavaPATH

export TERMINFO=/bin/.terminfo

export GOVersion="$(sed -n '/^GOVersion=[0-9\.]\+$/s/[^0-9\.]//gp' /bin/goptimize.sh)"

# If not running interactively, don't do anything
[[ "$-" != *i* ]] && return

# Set a default prompt of: user@host and current_directory
PS1='\[\e]0;MiniCygwin GOptimize v'"${GOVersion}"'\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]\n\$ '

mkdir -m 777 -p /PlaceApksHere
cd /PlaceApksHere;
